/* ===== VARIABLES CSS ===== */
:root{
  --bg:#f6f0e8;
  --ink:#2b2b2b;
  --accent:#6b2b2b;
  --muted:#6b6b6b;
  --card:#fff8f0;
  --stroke:#d3c3b2;
}

/* ===== RESET Y BASE ===== */
*{box-sizing:border-box}

body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:'Montserrat',system-ui,-apple-system,Roboto,Inter,Ubuntu,Arial,sans-serif;
}

.wrap{max-width:720px;margin:auto;padding:16px}

/* ===== HEADER ===== */
header{
  display:flex;
  align-items:center;
  gap:12px;
  position:sticky;
  top:0;
  background:var(--bg);
  padding:10px 0;
  z-index:2;
  flex-wrap:wrap;
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.brand img{
  width:44px;
  height:44px;
  border-radius:12px;
  object-fit:cover;
  background:#efe7db;
  border:1px solid #cbbba8;
  box-shadow:0 1px 0 rgba(0,0,0,.04);
}

h1{
  margin:0;
  font-size:1.25rem;
  color:var(--accent);
  font-weight:800;
}

.sub{
  font-size:.9rem;
  color:var(--muted);
  font-weight:500;
}

.toolbar{
  display:flex;
  gap:8px;
  flex:1;
  justify-content:flex-end;
  min-width:100%;
}

@media(min-width:520px){
  .toolbar{min-width:0}
}

/* ===== FORMULARIOS ===== */
input,select,button{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--stroke);
  font-size:1rem;
  font-family:'Montserrat',sans-serif;
  transition:all .15s ease;
}

input{
  flex:1;
  min-width:130px;
}

input:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(107,43,43,.1);
}

select{
  cursor:pointer;
  font-weight:500;
}

select:hover{
  border-color:var(--accent);
}

button.primary{
  background:var(--accent);
  color:white;
  border:none;
  cursor:pointer;
  font-weight:700;
  transition:transform .15s ease, box-shadow .15s ease;
}

button.primary:hover:not([disabled]){
  transform:translateY(-2px);
  box-shadow:0 6px 18px rgba(107,43,43,.3);
}

button.primary:active:not([disabled]){
  transform:translateY(0);
}

button[disabled]{
  opacity:.6;
  cursor:not-allowed;
}

/* ===== GRID Y CARDS ===== */
.grid{
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
}

@media(min-width:520px){
  .grid{grid-template-columns:1fr 1fr}
}

.card{
  background:var(--card);
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 1px 2px rgba(0,0,0,.06);
  display:flex;
  gap:12px;
  padding:10px;
  border:1px solid #eadfd1;
  transition:transform .15s ease, box-shadow .15s ease;
  animation:fadeIn .4s ease backwards;
}

.card:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}

.card:nth-child(1){animation-delay:.05s}
.card:nth-child(2){animation-delay:.1s}
.card:nth-child(3){animation-delay:.15s}
.card:nth-child(4){animation-delay:.2s}
.card:nth-child(5){animation-delay:.25s}

.ph{
  width:110px;
  height:110px;
  background:#efe7db;
  display:grid;
  place-items:center;
  color:var(--accent);
  font-weight:700;
  border-radius:12px;
  overflow:hidden;
}

.thumb{
  width:110px;
  height:110px;
  object-fit:cover;
  border-radius:12px;
  display:block;
  transition:transform .3s ease, object-fit .3s ease;
  cursor:pointer;
}

.thumb:hover{
  transform:scale(1.8);
  object-fit:contain;
  z-index:10;
  position:relative;
  box-shadow:0 8px 25px rgba(0,0,0,.3);
}

.card .body{
  padding:2px 0 0 0;
  flex:1;
  min-width:0;
}

.name{
  font-weight:700;
  font-size:1rem;
  margin-bottom:4px;
}

.meta{
  color:var(--muted);
  font-size:.9rem;
  margin-bottom:6px;
}

.price{
  font-weight:800;
  color:var(--accent);
}

.qty{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:8px;
}

.qty .count{
  font-weight:700;
  min-width:18px;
  text-align:center;
}

.iconbtn{
  width:40px;
  height:40px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:#fff;
  display:grid;
  place-items:center;
  cursor:pointer;
  box-shadow:0 1px 0 rgba(0,0,0,.04);
  transition:transform .1s ease, background .15s ease, border-color .15s ease;
  font-size:1.2rem;
  font-weight:600;
  color:var(--ink);
}

.iconbtn:active{
  transform:scale(.94);
}

.iconbtn:hover{
  border-color:var(--accent);
}

.iconbtn--plus{
  background:var(--accent);
  color:#fff;
  border-color:var(--accent);
}

.iconbtn--plus:hover{
  background:#5a2424;
}

.iconbtn--minus{
  background:#fff;
}

/* ===== CARTBAR ===== */
.cartbar{
  position:sticky;
  bottom:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#1f1b18;
  color:#fff;
  padding:12px 14px;
  border-radius:14px;
  margin-top:14px;
  box-shadow:0 4px 20px rgba(0,0,0,.2);
  gap:10px;
  flex-wrap:wrap;
}

.cartbar button{
  transition:transform .15s ease, opacity .15s ease;
}

.cartbar button:hover:not([disabled]){
  transform:scale(1.05);
}

.cartbar button:active:not([disabled]){
  transform:scale(.98);
}

.muted{
  color:var(--muted);
  font-size:.85rem;
  margin-top:6px;
}

/* ===== BOTÃ“N AGREGAR VINO ===== */
.add-wine-btn{
  background:linear-gradient(135deg, #28a745, #20c997);
  color:white;
  border:none;
  padding:8px 16px;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  transition:all .15s ease;
  font-size:.9rem;
}

.add-wine-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 4px 12px rgba(40,167,69,.3);
}

/* ===== MODAL ===== */
.modal{
  display:none;
  position:fixed;
  z-index:1000;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background-color:rgba(0,0,0,.5);
  backdrop-filter:blur(4px);
}

.modal-content{
  background:white;
  margin:5% auto;
  padding:0;
  border-radius:20px;
  width:90%;
  max-width:500px;
  box-shadow:0 20px 60px rgba(0,0,0,.3);
  animation:modalSlideIn .3s ease;
}

@keyframes modalSlideIn{
  from{opacity:0;transform:translateY(-50px) scale(.9)}
  to{opacity:1;transform:translateY(0) scale(1)}
}

.modal-header{
  background:linear-gradient(135deg, var(--accent), #8b3a3a);
  color:white;
  padding:20px;
  border-radius:20px 20px 0 0;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.modal-header h2{
  margin:0;
  font-size:1.3rem;
  font-weight:700;
}

.close{
  color:white;
  font-size:28px;
  font-weight:bold;
  cursor:pointer;
  transition:opacity .15s ease;
}

.close:hover{
  opacity:.7;
}

#wine-form{
  padding:25px;
}

.form-group{
  margin-bottom:20px;
}

.form-row{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:15px;
}

.form-group label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
  color:var(--ink);
  font-size:.9rem;
}

.form-group input,
.form-group select{
  width:100%;
  padding:12px;
  border:2px solid #e0e0e0;
  border-radius:10px;
  font-size:1rem;
  font-family:'Montserrat',sans-serif;
  transition:border-color .15s ease, box-shadow .15s ease;
}

.form-group input:focus,
.form-group select:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(107,43,43,.1);
}

.form-group small{
  display:block;
  margin-top:4px;
  color:var(--muted);
  font-size:.8rem;
}

.modal-actions{
  display:flex;
  gap:12px;
  justify-content:flex-end;
  margin-top:25px;
}

.btn-cancel{
  background:#f8f9fa;
  color:var(--muted);
  border:2px solid #e0e0e0;
  padding:12px 24px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  transition:all .15s ease;
}

.btn-cancel:hover{
  background:#e9ecef;
  border-color:#adb5bd;
}

.btn-save{
  background:linear-gradient(135deg, var(--accent), #8b3a3a);
  color:white;
  border:none;
  padding:12px 24px;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  transition:all .15s ease;
}

.btn-save:hover{
  transform:translateY(-1px);
  box-shadow:0 4px 12px rgba(107,43,43,.3);
}

/* ===== MODAL DE IMAGEN ===== */
.image-modal-content{
  background:transparent;
  border:none;
  box-shadow:none;
  max-width:90vw;
  max-height:90vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.image-modal-content img{
  max-width:100%;
  max-height:80vh;
  object-fit:contain;
  border-radius:15px;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
}

#close-image{
  position:absolute;
  top:20px;
  right:30px;
  color:white;
  font-size:40px;
  font-weight:bold;
  cursor:pointer;
  z-index:1001;
  text-shadow:0 2px 4px rgba(0,0,0,.5);
}

#close-image:hover{
  opacity:.8;
}

/* ===== CARRITO FLOTANTE ===== */
.floating-cart{
  position:fixed;
  top:50%;
  right:20px;
  transform:translateY(-50%);
  z-index:100;
  opacity:0;
  visibility:hidden;
  transition:all .3s ease;
  cursor:pointer;
}

.floating-cart.show{
  opacity:1;
  visibility:visible;
}

.floating-cart-content{
  background:linear-gradient(135deg, var(--accent), #8b3a3a);
  color:white;
  padding:12px 16px;
  border-radius:20px;
  box-shadow:0 8px 25px rgba(107,43,43,.4);
  display:flex;
  align-items:center;
  gap:10px;
  min-width:120px;
  backdrop-filter:blur(10px);
  border:2px solid rgba(255,255,255,.2);
}

.floating-cart-icon{
  font-size:1.5rem;
  animation:bounce 2s infinite;
}

.floating-cart-info{
  display:flex;
  flex-direction:column;
  align-items:center;
}

.floating-cart-items{
  font-size:1.1rem;
  font-weight:700;
  line-height:1;
}

.floating-cart-total{
  font-size:.9rem;
  font-weight:600;
  opacity:.9;
}

@keyframes bounce{
  0%, 20%, 50%, 80%, 100%{transform:translateY(0)}
  40%{transform:translateY(-3px)}
  60%{transform:translateY(-2px)}
}

@media(max-width:768px){
  .floating-cart{
    right:10px;
    top:auto;
    bottom:100px;
    transform:none;
  }
  
  .floating-cart-content{
    padding:10px 14px;
    min-width:100px;
  }
}

/* ===== ANIMACIONES ===== */
@keyframes bump{
  0%{transform:scale(1)}
  30%{transform:scale(1.14)}
  70%{transform:scale(.96)}
  100%{transform:scale(1)}
}

@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(107,43,43,.45)}
  70%{box-shadow:0 0 0 14px rgba(107,43,43,0)}
  100%{box-shadow:0 0 0 0 rgba(107,43,43,0)}
}

@keyframes shake{
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(-2px)}
  75%{transform:translateX(2px)}
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

.anim-bump{
  animation:bump .32s ease;
}

.anim-pulse{
  animation:pulse .6s ease;
}

.anim-shake{
  animation:shake .25s ease;
}

/* ===== RESPONSIVE ===== */
@media(max-width:600px){
  .modal-content{
    margin:10% auto;
    width:95%;
  }
  
  .form-row{
    grid-template-columns:1fr;
  }
  
  .modal-actions{
    flex-direction:column;
  }
}

@media (prefers-reduced-motion: reduce){
  .card,.iconbtn,button{transition:none}
  .anim-bump,.anim-pulse,.anim-shake{animation:none}
  .card{animation:none}
}
